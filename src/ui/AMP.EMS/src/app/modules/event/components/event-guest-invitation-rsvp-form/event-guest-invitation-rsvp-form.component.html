<div class="change-response-container" *ngIf="checkIfResponded && this.guestInvitationRsvp.response">
  <span *ngIf="checkIfRespondedMessage">
    {{checkIfRespondedMessage}}
  </span>
  <span *ngIf="checkIfAcceptedMessage && guestInvitationRsvp?.response === 'ACCEPT'">
    {{checkIfAcceptedMessage}}
  </span>
  <span *ngIf="checkIfDeclinedMessage && guestInvitationRsvp?.response === 'DECLINE'">
    {{checkIfDeclinedMessage}}
  </span>
  <div class="change-response-button-container">
    <p-button (click)="changeResponse()">Change my response</p-button>
  </div>
</div>

<ng-container *ngIf="!(checkIfResponded && this.guestInvitationRsvp.response)">
  <ng-content></ng-content>

  <form [formGroup]="rsvpForm" (ngSubmit)="onSendResponseClick()">
    <div class="form-container">
      <div *ngIf="choiceMessage">{{choiceMessage}}</div>
      <div class="guest-names-container" *ngIf="rsvpForm.value['response'] === 'ACCEPT'">
        <div *ngIf="acceptMessage">{{acceptMessage}}</div>
        <span *ngIf="secondaryGuestsLabel && guestNames.controls.length > 1">{{secondaryGuestsLabel}}</span>
        <ng-container *ngFor="let guestNameControl of guestNames.controls; let i = index">
          <input *ngIf="i < guestNames.controls.length" id="guest-{{i}}" [formControl]="guestNameControl" pInputText
            type="text" [ngClass]="{'w-full m-1': true }" placeholder='{{secondaryGuestsPlaceholder || "Name " + i}}' />

          <p-message *ngIf="i===0  && guestNameControl?.invalid && guestNameControl?.touched" severity="warn"
            class="w-full" text="Please enter your name">
          </p-message>
        </ng-container>
        <div *ngIf="requestDetails">
          <div>{{requestDetailsMessage}}</div>
          <textarea pInputText id="request-details" rows="10" class="w-full" formControlName="details"></textarea>
        </div>
      </div>
      <div class="radiobutton-container flex flex-wrap gap-3">
        <div class="flex gap-3 align-items-center">
          <p-radioButton pRipple inputId="response-accept" formControlName="response" value="ACCEPT" />
          <label class="ml-2" for="response-accept" class="accept-label">{{acceptLabel}}</label>
        </div>

        <div class="flex gap-3 align-items-center">
          <p-radioButton pRipple inputId="response-decline" formControlName="response" value="DECLINE" />
          <label class="ml-2" for="response-decline" class="decline-label">{{declineLabel}}</label>
        </div>
      </div>
      <div class="button-container flex flex-wrap gap-3" *ngIf="rsvpForm.value['response']">
        <p-button pRipple severity="info" [ngClass]="submitButtonClass" (click)="onSendResponseClick()"
          [disabled]="(rsvpForm.value['response'] === 'ACCEPT' && rsvpForm.get('guestNames')?.invalid)">Send
          Response</p-button>

      </div>
    </div>
  </form>
</ng-container>